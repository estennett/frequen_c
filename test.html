<!DOCTYPE html>
<html>
  <head>
    <title>frequen.c</title>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
  </head>
  <body>
    <header>
      <h1>frequen.c</h1>
    </header>

    <form>
      <label for="genre">Genre:</label>
      <input type="text" id="genre">
      <input type="submit" text="Search" id="genreSubmit">
    </form>

    <div id="podcastDisplay">
    </div>

  <script>
    $(document).ready(function() {

    // Search iTunes API for podcasts based on genre
    var searchPodcast = function(genre){
      var url = "https://itunes.apple.com/search?term=" + genre + "&media=podcast";
      $.ajax({
          url: url,
          dataType: 'JSONP'
      })
      .done(function(response) {
        console.log(response);
        generateList(response.results);
      })
      .fail(function(response) {
        console.log(response);
      })
    }

    // Create DOM Elements with results
    var generateList = function(searchResults){
      var $el = $("<div/>");
      $.each(searchResults, function(index, podcast){
          console.log(podcast);
          var $preview = "<p>" + podcast.artistName + "</p>";
          $preview += "<img src=" + podcast.artworkUrl100 + ">"
          $el.append($preview);
        })
      $("#podcastDisplay").append($el);
    }


    // Event Listeners
    $("form").submit(function(event){
      event.preventDefault();
      var input = $("#genre").val();
      searchPodcast(input);
    })
   });
  </script>
  </body>
</html>
